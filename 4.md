éå¸¸å¥½ âœ…
ä»¥ä¸‹æ˜¯å¯¦ä½œå°å‘çš„æ•™å­¸æ–‡ä»¶ï¼š

# ã€Šç¬¬ä¸€å€‹å°ˆæ¡ˆåˆå§‹åŒ–ç¯„ä¾‹æ“ä½œæŒ‡å—ã€‹

*(Project Demo Initialization Guide â€“ From Zero to Working Build)*

---

## ä¸€ã€ç›®æ¨™

æœ¬æ–‡ä»¶å°‡å¸¶ä½ å¾é›¶é–‹å§‹å»ºç«‹ä¸€å€‹å®Œæ•´å¯é‹è¡Œçš„å°ˆæ¡ˆï¼š

> ğŸ§© ç”±ç¨‹å¼æ¨¡çµ„ï¼ˆCodeï¼‰èˆ‡æç¤ºè©æ¨¡çµ„ï¼ˆGEMï¼‰çµ„è£æˆä¸€å€‹å¯åŸ·è¡Œçš„ AI æ‡‰ç”¨ã€‚

æœ€çµ‚ä½ å°‡å®Œæˆï¼š

* 1 å€‹ GEM æ¨¡çµ„
* 1 å€‹ Recipe çµ„è£æª”
* 1 å€‹åŸ·è¡Œç¨‹å¼ï¼ˆæ•´åˆ Code + GEMï¼‰
* 1 å€‹æ¸¬è©¦æµç¨‹

---

## äºŒã€å°ˆæ¡ˆåˆå§‹åŒ–

### 1ï¸âƒ£ å»ºç«‹å°ˆæ¡ˆè³‡æ–™å¤¾

åœ¨æœ¬åœ° VS Code çµ‚ç«¯åŸ·è¡Œï¼š

```bash
cd dev/projects
cp -r proj-demo proj-first
```

çµæ§‹å¦‚ä¸‹ï¼š

```
dev/projects/proj-first/
 â”œâ”€ app/
 â”œâ”€ prompts/
 â”‚   â”œâ”€ recipes/
 â”‚   â”œâ”€ compiled_prompts/
 â”‚   â””â”€ evals/
 â”œâ”€ ssot/
 â””â”€ tests/
```

---

### 2ï¸âƒ£ å»ºç«‹ SSOT æ¶æ§‹ï¼ˆè³‡æ–™çµæ§‹ï¼‰

`ssot/schema.json`

```json
{
  "project_spec": {
    "intent": "string",
    "summary": "string",
    "report": "object"
  }
}
```

é€™ä»½æ˜¯æ‰€æœ‰æ¨¡çµ„èˆ‡ prompt å…±ç”¨çš„ç‹€æ…‹æ¨¡å‹ã€‚
å®ƒç¢ºä¿ Code â†” GEM ä¹‹é–“æºé€šçš„æ¬„ä½ä¸€è‡´ã€‚

---

## ä¸‰ã€å»ºç«‹æœ€å° GEM æ¨¡çµ„

### 1ï¸âƒ£ Componentï¼šåŠŸèƒ½æ¨¡çµ„

åœ¨ `core/prompts/components/` æ–°å¢
`fn_summarize_text.md`ï¼š

```markdown
---
name: fn_summarize_text
version: 1.0.0
reads: ["user_input"]
writes: ["project_spec.summary"]
contracts:
  output_type: string
---

è«‹å°‡ä»¥ä¸‹è¼¸å…¥å…§å®¹é€²è¡Œæ‘˜è¦ï¼Œä¸¦ä»¥ JSON æ ¼å¼è¼¸å‡ºï¼š
{
  "summary": "<ä¸€å¥è©±æ‘˜è¦>"
}
```

---

### 2ï¸âƒ£ GEMï¼šçµ„åˆæ¨¡çµ„

åœ¨ `core/prompts/gems/` æ–°å¢
`gem_simple_summary.json`ï¼š

```json
{
  "name": "gem_simple_summary",
  "version": "1.0.0",
  "description": "åŸºæ–¼å–®ä¸€æ‘˜è¦åŠŸèƒ½çš„ç°¡æ˜“ GEM",
  "modules": [
    {"name": "fn_summarize_text", "version_range": ">=1.0.0"}
  ],
  "io_rules": {
    "authorize_writes": {
      "fn_summarize_text": ["project_spec.summary"]
    },
    "stage_order": ["summary"]
  }
}
```

---

## å››ã€å»ºç«‹ Recipeï¼ˆå°ˆæ¡ˆçµ„è£è¦æ ¼ï¼‰

åœ¨ `dev/projects/proj-first/prompts/recipes/` æ–°å¢
`spec_summary_demo.json`ï¼š

```json
{
  "name": "spec_summary_demo",
  "use_gems": [
    {"name": "gem_simple_summary", "version": "1.0.0"}
  ]
}
```

é€™è¡¨ç¤ºæ­¤å°ˆæ¡ˆè¦ä½¿ç”¨å“ªå€‹ GEM æ¨¡çµ„ä¾†çµ„è£ promptã€‚

---

## äº”ã€çµ„è£èˆ‡é è¦½ Prompt

### 1ï¸âƒ£ çµ„è£å‘½ä»¤

```bash
python core/prompts/tools/build_prompt.py \
  --recipe dev/projects/proj-first/prompts/recipes/spec_summary_demo.json \
  --registry core/prompts/registry
```

å¦‚æœçµ„è£æˆåŠŸï¼Œæœƒè¼¸å‡ºï¼š

```
âœ… Compiled prompt written to:
dev/projects/proj-first/prompts/compiled_prompts/spec_summary_demo.md
```

---

### 2ï¸âƒ£ é è¦½å…§å®¹

ä½¿ç”¨ï¼š

```bash
python core/prompts/tools/prompt_preview.py \
  --recipe dev/projects/proj-first/prompts/recipes/spec_summary_demo.json
```

çµ‚ç«¯æœƒå°å‡ºï¼š

```
=== RECIPE: spec_summary_demo ===
# GEM: gem_simple_summary@1.0.0
## [1] MODULE: fn_summarize_text v1.0.0
reads: ['user_input'] | writes: ['project_spec.summary']
contracts: {'output_type': 'string'}

è«‹å°‡ä»¥ä¸‹è¼¸å…¥å…§å®¹é€²è¡Œæ‘˜è¦ï¼Œä¸¦ä»¥ JSON æ ¼å¼è¼¸å‡ºï¼š
{ "summary": "<ä¸€å¥è©±æ‘˜è¦>" }
```

---

## å…­ã€å»ºç«‹ç¨‹å¼ç«¯æ•´åˆï¼ˆå‘¼å«çµ„è£çµæœï¼‰

### 1ï¸âƒ£ å»ºç«‹ `app/main.py`

```python
from pathlib import Path

def run_prompt():
    path = Path("dev/projects/proj-first/prompts/compiled_prompts/spec_summary_demo.md")
    prompt = path.read_text(encoding="utf-8")
    print("ğŸ§  PROMPT COMPILED CONTENT:\n")
    print(prompt)

if __name__ == "__main__":
    run_prompt()
```

é€™åªæ˜¯è®€å–çµ„è£çµæœï¼Œæ¨¡æ“¬å¾Œç«¯å‘¼å« prompt çš„æƒ…å¢ƒã€‚

---

### 2ï¸âƒ£ åœ¨ VS Code åŸ·è¡Œ

åœ¨å‘½ä»¤é¢æ¿ (Ctrl+Shift+B)ï¼š
é¸æ“‡ `ğŸš€ Run Demo App`

è¼¸å‡ºï¼š

```
ğŸ§  PROMPT COMPILED CONTENT:
è«‹å°‡ä»¥ä¸‹è¼¸å…¥å…§å®¹é€²è¡Œæ‘˜è¦ï¼Œä¸¦ä»¥ JSON æ ¼å¼è¼¸å‡ºï¼š
{ "summary": "<ä¸€å¥è©±æ‘˜è¦>" }
```

---

## ä¸ƒã€æ¸¬è©¦èˆ‡è©•ä¼°

æ–°å¢ `tests/test_prompt_build.py`ï¼š

```python
from pathlib import Path

def test_compiled_prompt_exists():
    prompt_path = Path("dev/projects/proj-first/prompts/compiled_prompts/spec_summary_demo.md")
    assert prompt_path.exists(), "Compiled prompt should be generated"
    content = prompt_path.read_text()
    assert "æ‘˜è¦" in content
```

åŸ·è¡Œï¼š

```bash
pytest dev/projects/proj-first/tests/
```

è¼¸å‡ºï¼š

```
âœ… 1 passed in 0.12s
```

---

## å…«ã€ç‰ˆæœ¬é–å®š

åœ¨ `dev/projects/proj-first/prompts/` æ–°å¢ï¼š
`lockfile.json`

```json
{
  "project": "proj-first",
  "gems": {
    "gem_simple_summary": "1.0.0"
  },
  "compiled_at": "2025-11-06T11:00:00Z"
}
```

æ­¤æª”æ¡ˆå¯ç¢ºä¿ä¹‹å¾Œå³ä½¿ Core æ›´æ–°ï¼Œ
æ­¤å°ˆæ¡ˆä»å›ºå®šä½¿ç”¨é€™å€‹ç‰ˆæœ¬çš„ GEMã€‚

---

## ä¹ã€Git æ“ä½œèˆ‡åŒæ­¥

```bash
git add .
git commit -m "feat: add proj-first with simple summary gem"
git push origin main
```

CI/CD Pipelineï¼ˆå¦‚ `.github/workflows/build.yml`ï¼‰æœƒè‡ªå‹•ï¼š

1. é©—è­‰ Recipe
2. çµ„è£ Prompt
3. è·‘æ¸¬è©¦
4. æ›´æ–° `lockfile.json`

---

## åã€æˆæœé©—è­‰

| æª¢æŸ¥é …           | çµæœ | ä½ç½®                                          |
| ------------- | -- | ------------------------------------------- |
| Prompt æ˜¯å¦æˆåŠŸçµ„è£ | âœ…  | `compiled_prompts/spec_summary_demo.md`     |
| GEM æ˜¯å¦å¯è¢«å¼•ç”¨    | âœ…  | `core/prompts/gems/gem_simple_summary.json` |
| æ¸¬è©¦æ˜¯å¦é€šé        | âœ…  | `tests/test_prompt_build.py`                |
| VS Code å¯å¦åŸ·è¡Œ  | âœ…  | `app/main.py`                               |
| GitHub æ˜¯å¦åŒæ­¥   | âœ…  | `main` branch                               |

---

## ğŸ§  åä¸€ã€å»¶ä¼¸å¯¦ä½œ

| éœ€æ±‚           | ä½œæ³•                                   |
| ------------ | ------------------------------------ |
| æƒ³åŠ ä¸€å€‹åˆ†ææ¨¡çµ„     | æ–°å¢ `fn_analyze_intent.md` â†’ æ›´æ–° GEM   |
| æƒ³è®“ç¨‹å¼è‡ªå‹•å‘¼å« LLM | åœ¨ `main.py` å¯¦ä½œ LLM API å‘¼å«            |
| æƒ³åŠ ä¸Šå›æ­¸æ¸¬è©¦      | åœ¨ `tests/eval_prompt_output.py` æ¯”å°çµæœ |
| æƒ³é‡ç”¨æ­¤å°ˆæ¡ˆçµæ§‹     | ç›´æ¥ `cp -r proj-first proj-next`      |

---

## âœ… åäºŒã€çµè«–

ä½ ç¾åœ¨å·²ç¶“å»ºç«‹äº†ï¼š

* ä¸€å€‹æœ€å° GEM
* ä¸€å€‹æœ€å° Recipe
* ä¸€æ¬¡å®Œæ•´çµ„è£
* ä¸€æ¬¡ç¨‹å¼æ•´åˆèˆ‡æ¸¬è©¦

> å¾é€™å€‹åŸºç¤é–‹å§‹ï¼Œä½ å¯ä»¥ï¼š
>
> * å¢åŠ å¤š GEM çµ„åˆ
> * å»ºç«‹å®Œæ•´çš„å¤šéšæ®µ Pipeline
> * æ“´å±• Layer å±¤é‚è¼¯ï¼Œå½¢æˆå…±ç”¨æ¡†æ¶

é€™å€‹ `proj-first` å°ˆæ¡ˆå°±æˆäº†ä½ çš„ç¬¬ä¸€å€‹
**ã€Œæ¨¡çµ„åŒ– AI å°ˆæ¡ˆã€å¯¦ä¾‹** ğŸ¯

---

æ˜¯å¦è¦æˆ‘æ¥è‘—å¹«ä½ ç”Ÿæˆç¬¬äº”ä»½æ–‡ä»¶ï¼š
ğŸ“˜ã€Šç³»çµ±é‹è¡Œèˆ‡ç¶­è­·æ‰‹å†Šã€‹ï¼ˆåŒ…å«ï¼šç‰ˆæœ¬æ²»ç†ã€CI/CDã€è‡ªå‹•æ¸¬è©¦ã€éƒ¨ç½²ç­–ç•¥ï¼‰ï¼Ÿ
